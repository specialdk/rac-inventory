<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Stocktake Adjustment - RAC Inventory System</title>
    <link rel="stylesheet" href="/css/styles.css" />
  </head>
  <body>
    <!-- Header -->
    <header class="header">
      <div class="header-content">
        <div class="logo-section">
          <div class="logo">📦</div>
          <div class="site-title">
            <h1>Rirratjingu Mining Inventory System</h1>
            <p>Quarry production and inventory management</p>
          </div>
        </div>
        <div class="header-stats">
          <div class="stat-item">
            <div class="stat-label">Total Inventory Value</div>
            <div class="stat-value" id="headerTotalValue">$0</div>
          </div>
          <div class="user-info">
            <span>👤</span>
            <span>Admin User</span>
          </div>
        </div>
      </div>
    </header>

    <!-- Navigation -->
    <nav class="nav">
      <div class="nav-content">
        <a href="dashboard.html" class="nav-item">📊 Dashboard</a>
        <a href="operations.html" class="nav-item active">⚙️ Operations</a>
        <a href="maintenance.html" class="nav-item">🔧 Maintenance</a>
        <a href="reports.html" class="nav-item">📈 Reports</a>
      </div>
    </nav>

    <!-- Main Content -->
    <div class="container">
      <!-- Page Header -->
      <div
        class="page-header"
        style="
          display: flex;
          justify-content: space-between;
          align-items: center;
          margin-bottom: 2rem;
        "
      >
        <div>
          <h1 class="page-title">📊 Stocktake Adjustment</h1>
          <p class="page-subtitle">
            Align system inventory with physical stocktake measurements
          </p>
        </div>
        <div style="display: flex; gap: 1rem">
          <button class="btn-secondary" onclick="cancelStocktake()">
            Cancel
          </button>
          <button class="btn-primary" onclick="applyStocktake()">
            💾 Apply Stocktake
          </button>
        </div>
      </div>

      <!-- Stocktake Header - Single Row -->
      <div class="card" style="margin-bottom: 2rem">
        <div
          style="
            display: grid;
            grid-template-columns: 1fr 1.5fr 1fr 2fr 1fr;
            gap: 1rem;
            align-items: end;
          "
        >
          <div class="form-group" style="margin-bottom: 0">
            <label class="form-label required">Stocktake Date</label>
            <input
              type="date"
              id="stocktakeDate"
              class="form-control"
              required
            />
          </div>
          <div class="form-group" style="margin-bottom: 0">
            <label class="form-label required">Reference</label>
            <input
              type="text"
              id="stocktakeReference"
              class="form-control"
              placeholder="e.g., STOCK-2025-Q1"
              required
            />
          </div>
          <div class="form-group" style="margin-bottom: 0">
            <label class="form-label">Operator</label>
            <input
              type="text"
              id="stocktakeOperator"
              class="form-control"
              value="Admin User"
              readonly
            />
          </div>
          <div class="form-group" style="margin-bottom: 0">
            <label class="form-label">Notes</label>
            <input
              type="text"
              id="stocktakeNotes"
              class="form-control"
              placeholder="e.g., Q1 FY26 drone stocktake"
            />
          </div>
          <div class="form-group" style="margin-bottom: 0">
            <label class="form-label required">Avg Cost ($/t)</label>
            <input
              type="number"
              id="avgCost"
              class="form-control"
              step="0.01"
              placeholder="40.00"
              required
            />
          </div>
        </div>
      </div>

      <!-- Stocktake Table - Single Unified Table -->
      <div class="data-table">
        <table class="table">
          <thead>
            <tr>
              <th>Product</th>
              <th>Location</th>
              <th style="text-align: right">SOH (t)</th>
              <th style="text-align: center">Count (t)</th>
            </tr>
          </thead>
          <tbody id="stocktakeTableBody">
            <!-- Products populated by JS -->
          </tbody>
          <tfoot>
            <tr class="total-row">
              <td colspan="2"><strong>TOTAL ADJUSTMENT</strong></td>
              <td style="text-align: right">
                <strong id="totalAdjustment">0.0 t</strong>
              </td>
              <td style="text-align: center">
                <strong id="totalValue">$0</strong>
              </td>
            </tr>
          </tfoot>
        </table>
      </div>

      <!-- Action Buttons -->
      <div
        style="
          display: flex;
          justify-content: flex-end;
          gap: 1rem;
          margin-top: 2rem;
        "
      >
        <button class="btn-secondary btn-lg" onclick="cancelStocktake()">
          Cancel
        </button>
        <button class="btn-primary btn-lg" onclick="applyStocktake()">
          💾 Apply Stocktake Adjustment
        </button>
      </div>
    </div>

    <script src="/js/stocktake.js"></script>
  </body>
</html>
