<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Maintenance - RAC Inventory System</title>
    <link rel="stylesheet" href="/css/styles.css" />
  </head>
  <body>
    <!-- Header -->
    <header class="header">
      <div class="header-content">
        <div class="logo-section">
          <div class="logo">üì¶</div>
          <div class="site-title">
            <h1>Rirratjingu Mining Inventory System</h1>
            <p>Quarry production and inventory management</p>
          </div>
        </div>
        <div class="header-stats">
          <div class="stat-item">
            <div class="stat-label">Total Inventory Value</div>
            <div class="stat-value" id="totalValue">$0</div>
          </div>
          <div class="user-info">
            <span>üë§</span>
            <span>Admin User</span>
          </div>
        </div>
      </div>
    </header>

    <!-- Navigation -->
    <nav class="nav">
      <div class="nav-content">
        <a href="dashboard.html" class="nav-item">üìä Dashboard</a>
        <a href="operations.html" class="nav-item">‚öôÔ∏è Operations</a>
        <a href="maintenance.html" class="nav-item active">üîß Maintenance</a>
        <a href="reports.html" class="nav-item">üìà Reports</a>
      </div>
    </nav>

    <!-- Main Content -->
    <div class="container">
      <div class="page-header">
        <h1 class="page-title">System Maintenance</h1>
        <p class="page-subtitle">
          Manage products, customers, locations, vehicles, and operators
        </p>
      </div>

      <!-- Sub Navigation Tabs -->
      <div class="sub-nav">
        <button class="sub-nav-item active" onclick="showSection('products')">
          üì¶ Products
        </button>
        <button class="sub-nav-item" onclick="showSection('customers')">
          üë• Customers
        </button>
        <button class="sub-nav-item" onclick="showSection('locations')">
          üìç Locations
        </button>
        <button class="sub-nav-item" onclick="showSection('vehicles')">
          üöõ Vehicles
        </button>
        <button class="sub-nav-item" onclick="showSection('drivers')">
          üë∑ Drivers
        </button>
      </div>

      <!-- Products Section -->
      <div id="products-section" class="maintenance-section active">
        <div class="data-table">
          <div class="table-header">
            <h2 class="table-title">Products Catalog</h2>
            <div class="table-actions">
              <input
                type="text"
                class="search-box"
                id="searchProducts"
                placeholder="Search products..."
              />
              <button
                class="btn btn-primary btn-sm"
                onclick="openAddProductModal()"
              >
                ‚ûï Add Product
              </button>
            </div>
          </div>
          <div id="productsTableContainer">
            <div class="loading">
              <div class="spinner"></div>
              <p>Loading products...</p>
            </div>
          </div>
        </div>
      </div>

      <!-- Customers Section -->
      <div id="customers-section" class="maintenance-section">
        <div class="data-table">
          <div class="table-header">
            <h2 class="table-title">Customers Directory</h2>
            <div class="table-actions">
              <input
                type="text"
                class="search-box"
                id="searchCustomers"
                placeholder="Search customers..."
              />
              <button
                class="btn btn-primary btn-sm"
                onclick="openAddCustomerModal()"
              >
                ‚ûï Add Customer
              </button>
            </div>
          </div>
          <div id="customersTableContainer">
            <div class="loading">
              <div class="spinner"></div>
              <p>Loading customers...</p>
            </div>
          </div>
        </div>
      </div>

      <!-- Locations Section -->
      <div id="locations-section" class="maintenance-section">
        <div class="data-table">
          <div class="table-header">
            <h2 class="table-title">Stockpile Locations</h2>
            <div class="table-actions">
              <input
                type="text"
                class="search-box"
                id="searchLocations"
                placeholder="Search locations..."
              />
              <button
                class="btn btn-primary btn-sm"
                onclick="openAddLocationModal()"
              >
                ‚ûï Add Location
              </button>
            </div>
          </div>
          <div id="locationsTableContainer">
            <div class="loading">
              <div class="spinner"></div>
              <p>Loading locations...</p>
            </div>
          </div>
        </div>
      </div>

      <!-- Vehicles Section -->
      <div id="vehicles-section" class="maintenance-section">
        <div class="data-table">
          <div class="table-header">
            <h2 class="table-title">Fleet Vehicles</h2>
            <div class="table-actions">
              <input
                type="text"
                class="search-box"
                id="searchVehicles"
                placeholder="Search vehicles..."
              />
              <button
                class="btn btn-primary btn-sm"
                onclick="openAddVehicleModal()"
              >
                ‚ûï Add Vehicle
              </button>
            </div>
          </div>
          <div id="vehiclesTableContainer">
            <div class="loading">
              <div class="spinner"></div>
              <p>Loading vehicles...</p>
            </div>
          </div>
        </div>
      </div>

      <!-- Drivers Section -->
      <div id="drivers-section" class="maintenance-section">
        <div class="data-table">
          <div class="table-header">
            <h2 class="table-title">Operators & Drivers</h2>
            <div class="table-actions">
              <input
                type="text"
                class="search-box"
                id="searchDrivers"
                placeholder="Search drivers..."
              />
              <button
                class="btn btn-primary btn-sm"
                onclick="openAddDriverModal()"
              >
                ‚ûï Add Driver
              </button>
            </div>
          </div>
          <div id="driversTableContainer">
            <div class="loading">
              <div class="spinner"></div>
              <p>Loading drivers...</p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Product Modal -->
    <div id="productModal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h3 class="modal-title" id="productModalTitle">Add Product</h3>
          <button class="modal-close" onclick="closeProductModal()">
            &times;
          </button>
        </div>
        <div class="modal-body">
          <form id="productForm">
            <input type="hidden" id="product_id" />
            <div class="form-row">
              <div class="form-group">
                <label class="form-label required">Product Code</label>
                <input
                  type="text"
                  class="form-control"
                  id="product_code"
                  required
                />
              </div>
              <div class="form-group">
                <label class="form-label required">Product Name</label>
                <input
                  type="text"
                  class="form-control"
                  id="product_name"
                  required
                />
              </div>
            </div>
            <div class="form-row">
              <div class="form-group">
                <label class="form-label required">Family Group</label>
                <select class="form-control" id="family_group" required>
                  <option value="">Select Family</option>
                  <option value="AGGREGATES">Aggregates</option>
                  <option value="ROCK_ARMOR">Rock Armor</option>
                  <option value="SAND">Sand</option>
                  <option value="ROAD_BASE">Road Base</option>
                  <option value="DUST">Dust</option>
                </select>
              </div>
              <div class="form-group">
                <label class="form-label">Unit</label>
                <input
                  type="text"
                  class="form-control"
                  id="unit"
                  value="tonnes"
                />
              </div>
            </div>
            <div class="form-row">
              <div class="form-group">
                <label class="form-label required"
                  >Standard Cost ($/tonne)</label
                >
                <input
                  type="number"
                  class="form-control"
                  id="standard_cost"
                  step="0.01"
                  required
                />
              </div>
              <div class="form-group">
                <label class="form-label">Current Price ($/tonne)</label>
                <input
                  type="number"
                  class="form-control"
                  id="current_price"
                  step="0.01"
                />
              </div>
            </div>
            <div class="form-row">
              <div class="form-group">
                <label class="form-label">Min Stock Level (tonnes)</label>
                <input
                  type="number"
                  class="form-control"
                  id="min_stock_level"
                  step="0.01"
                />
              </div>
              <div class="form-group">
                <label class="form-label">Max Stock Level (tonnes)</label>
                <input
                  type="number"
                  class="form-control"
                  id="max_stock_level"
                  step="0.01"
                />
              </div>
            </div>
          </form>
        </div>
        <div class="modal-footer">
          <button class="btn btn-secondary" onclick="closeProductModal()">
            Cancel
          </button>
          <button class="btn btn-primary" onclick="saveProduct()">
            üíæ Save Product
          </button>
        </div>
      </div>
    </div>

    <!-- Customer Modal -->
    <div id="customerModal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h3 class="modal-title" id="customerModalTitle">Add Customer</h3>
          <button class="modal-close" onclick="closeCustomerModal()">
            &times;
          </button>
        </div>
        <div class="modal-body">
          <form id="customerForm">
            <input type="hidden" id="customer_id" />
            <div class="form-row">
              <div class="form-group">
                <label class="form-label required">Customer Code</label>
                <input
                  type="text"
                  class="form-control"
                  id="customer_code"
                  required
                />
              </div>
              <div class="form-group">
                <label class="form-label required">Customer Name</label>
                <input
                  type="text"
                  class="form-control"
                  id="customer_name"
                  required
                />
              </div>
            </div>
            <div class="form-row">
              <div class="form-group">
                <label class="form-label">Contact Person</label>
                <input type="text" class="form-control" id="contact_person" />
              </div>
              <div class="form-group">
                <label class="form-label">Phone</label>
                <input type="tel" class="form-control" id="phone" />
              </div>
            </div>
            <div class="form-group">
              <label class="form-label">Email</label>
              <input type="email" class="form-control" id="email" />
            </div>
            <div class="form-group">
              <label class="form-label">Address</label>
              <textarea class="form-control" id="address"></textarea>
            </div>
            <div class="form-group">
              <label class="form-label">Customer Type</label>
              <select class="form-control" id="customer_type">
                <option value="">Select Type</option>
                <option value="MAJOR_PROJECT">Major Project</option>
                <option value="CONSTRUCTION">Construction</option>
                <option value="RAC_INTERNAL">RAC Internal</option>
                <option value="RETAIL">Retail</option>
              </select>
            </div>
          </form>
        </div>
        <div class="modal-footer">
          <button class="btn btn-secondary" onclick="closeCustomerModal()">
            Cancel
          </button>
          <button class="btn btn-primary" onclick="saveCustomer()">
            üíæ Save Customer
          </button>
        </div>
      </div>
    </div>

    <!-- Similar modals for Location, Vehicle, and Driver would go here -->
    <!-- For brevity, I'll add these in the JavaScript file -->
    <!-- Location Modal -->
    <div id="locationModal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h2 id="locationModalTitle">Add Location</h2>
          <button class="modal-close" onclick="closeLocationModal()">√ó</button>
        </div>
        <form
          id="locationForm"
          onsubmit="event.preventDefault(); saveLocation();"
        >
          <input type="hidden" id="locationId" />

          <div class="form-row">
            <div class="form-group">
              <label for="locationCode">Location Code *</label>
              <input
                type="text"
                id="locationCode"
                required
                placeholder="e.g., 10"
              />
            </div>
            <div class="form-group">
              <label for="locationName">Location Name *</label>
              <input
                type="text"
                id="locationName"
                required
                placeholder="e.g., Stockpile 22"
              />
            </div>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label for="locationType">Location Type *</label>
              <select id="locationType" required>
                <option value="">Select Type</option>
                <option value="PRODUCTION">Production Area</option>
                <option value="STOCKPILE">Stockpile</option>
                <option value="DISPATCH">Dispatch Area</option>
              </select>
            </div>
            <div class="form-group">
              <label for="capacityTonnes">Capacity (tonnes)</label>
              <input
                type="number"
                id="capacityTonnes"
                step="0.01"
                placeholder="e.g., 1000"
              />
            </div>
          </div>

          <div class="form-group">
            <label for="assignedProduct">Assigned Product</label>
            <select id="assignedProduct">
              <option value="">None</option>
            </select>
          </div>

          <div class="form-group">
            <label for="locationDescription">Description</label>
            <textarea
              id="locationDescription"
              rows="3"
              placeholder="Additional notes about this location"
            ></textarea>
          </div>

          <div class="modal-footer">
            <button
              type="button"
              class="btn-secondary"
              onclick="closeLocationModal()"
            >
              Cancel
            </button>
            <button type="submit" class="btn-primary">üíæ Save Location</button>
          </div>
        </form>
      </div>
    </div>

    <!-- Vehicle Modal -->
    <div id="vehicleModal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h2 id="vehicleModalTitle">Add Vehicle</h2>
          <button class="modal-close" onclick="closeVehicleModal()">√ó</button>
        </div>
        <form
          id="vehicleForm"
          onsubmit="event.preventDefault(); saveVehicle();"
        >
          <input type="hidden" id="vehicleId" />

          <div class="form-row">
            <div class="form-group">
              <label for="registration">Registration *</label>
              <input
                type="text"
                id="registration"
                required
                placeholder="e.g., RAC-003"
              />
            </div>
            <div class="form-group">
              <label for="vehicleType">Vehicle Type *</label>
              <select id="vehicleType" required>
                <option value="">Select Type</option>
                <option value="TRUCK">Truck</option>
                <option value="LOADER">Loader</option>
                <option value="EXCAVATOR">Excavator</option>
                <option value="GRADER">Grader</option>
                <option value="OTHER">Other</option>
              </select>
            </div>
          </div>

          <div class="form-group">
            <label for="capacityTonnes">Capacity (tonnes)</label>
            <input
              type="number"
              id="capacityTonnes"
              step="0.01"
              placeholder="e.g., 30"
            />
          </div>

          <div class="form-row">
            <div class="form-group">
              <label for="lastServiceDate">Last Service Date</label>
              <input type="date" id="lastServiceDate" />
            </div>
            <div class="form-group">
              <label for="nextServiceDate">Next Service Date</label>
              <input type="date" id="nextServiceDate" />
            </div>
          </div>

          <div class="form-group">
            <label for="vehicleNotes">Notes</label>
            <textarea
              id="vehicleNotes"
              rows="3"
              placeholder="Service history, issues, etc."
            ></textarea>
          </div>

          <div class="modal-footer">
            <button
              type="button"
              class="btn-secondary"
              onclick="closeVehicleModal()"
            >
              Cancel
            </button>
            <button type="submit" class="btn-primary">üíæ Save Vehicle</button>
          </div>
        </form>
      </div>
    </div>

    <!-- Driver Modal -->
    <div id="driverModal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h2 id="driverModalTitle">Add Driver</h2>
          <button class="modal-close" onclick="closeDriverModal()">√ó</button>
        </div>
        <form id="driverForm" onsubmit="event.preventDefault(); saveDriver();">
          <input type="hidden" id="driverId" />

          <div class="form-row">
            <div class="form-group">
              <label for="driverCode">Driver Code *</label>
              <input
                type="text"
                id="driverCode"
                required
                placeholder="e.g., JW-01"
              />
            </div>
            <div class="form-group">
              <label for="driverName">Driver Name *</label>
              <input
                type="text"
                id="driverName"
                required
                placeholder="e.g., Joe Williams"
              />
            </div>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label for="licenseNumber">License Number</label>
              <input
                type="text"
                id="licenseNumber"
                placeholder="License number"
              />
            </div>
            <div class="form-group">
              <label for="licenseClass">License Class</label>
              <select id="licenseClass">
                <option value="">Select Class</option>
                <option value="C">C - Car</option>
                <option value="LR">LR - Light Rigid</option>
                <option value="MR">MR - Medium Rigid</option>
                <option value="HR">HR - Heavy Rigid</option>
                <option value="HC">HC - Heavy Combination</option>
                <option value="MC">MC - Multi Combination</option>
              </select>
            </div>
          </div>

          <div class="form-group">
            <label for="licenseExpiry">License Expiry</label>
            <input type="date" id="licenseExpiry" />
          </div>

          <div class="form-group">
            <label for="certifications">Certifications</label>
            <textarea
              id="certifications"
              rows="3"
              placeholder="Forklift, Loader, Excavator, etc."
            ></textarea>
          </div>

          <div class="modal-footer">
            <button
              type="button"
              class="btn-secondary"
              onclick="closeDriverModal()"
            >
              Cancel
            </button>
            <button type="submit" class="btn-primary">üíæ Save Driver</button>
          </div>
        </form>
      </div>
    </div>
    <script src="/js/maintenance.js"></script>
  </body>
</html>
