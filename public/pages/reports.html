<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Reports - RAC Inventory System</title>
    <link rel="stylesheet" href="/css/styles.css" />
  </head>
  <body>
    <!-- Header -->
    <header class="header">
      <div class="header-content">
        <div class="logo-section">
          <div class="logo">📦</div>
          <div class="site-title">
            <h1>Rirratjingu Mining Inventory System</h1>
            <p>Quarry production and inventory management</p>
          </div>
        </div>
        <div class="header-stats">
          <div class="stat-item">
            <div class="stat-label">Total Inventory Value</div>
            <div class="stat-value" id="headerTotalValue">$0</div>
          </div>
          <div class="user-info">
            <span>👤</span>
            <span>Admin User</span>
          </div>
        </div>
      </div>
    </header>

    <!-- Navigation -->
    <nav class="nav">
      <div class="nav-content">
        <a href="dashboard.html" class="nav-item">📊 Dashboard</a>
        <a href="operations.html" class="nav-item">⚙️ Operations</a>
        <a href="maintenance.html" class="nav-item">🔧 Maintenance</a>
        <a href="reports.html" class="nav-item active">📈 Reports</a>
      </div>
    </nav>

    <!-- Main Content -->
    <div class="container">
      <div class="page-header">
        <h1 class="page-title">📈 Reports & Analytics</h1>
        <p class="page-subtitle">
          Access inventory reports, sales analysis, and operational insights
        </p>
      </div>

      <!-- Report Summary Cards -->
      <div class="stats-grid" style="grid-template-columns: repeat(3, 1fr)">
        <div class="stat-card primary">
          <div class="stat-card-header">
            <div class="stat-card-title">Available Reports</div>
            <div class="stat-card-icon">📄</div>
          </div>
          <div class="stat-card-value">5</div>
        </div>

        <div class="stat-card success">
          <div class="stat-card-header">
            <div class="stat-card-title">Active Now</div>
            <div class="stat-card-icon">✅</div>
          </div>
          <div class="stat-card-value">2</div>
        </div>

        <div class="stat-card warning">
          <div class="stat-card-header">
            <div class="stat-card-title">Coming Soon</div>
            <div class="stat-card-icon">🚧</div>
          </div>
          <div class="stat-card-value">3</div>
        </div>
      </div>

      <!-- Reports Grid -->
      <div class="action-cards" style="grid-template-columns: repeat(2, 1fr)">
        <!-- Account Detail Report - ACTIVE -->
        <div
          class="action-card success"
          onclick="window.location.href='/report-account-detail.html'"
          style="cursor: pointer"
        >
          <div style="position: absolute; top: 10px; right: 10px">
            <span class="badge badge-success">✅ ACTIVE</span>
          </div>
          <div class="action-card-icon">📋</div>
          <div class="action-card-title">Account Detail Report</div>
          <div class="action-card-description">
            Customer-specific sales dockets with date range. Includes docket
            numbers, net weight, fees, GST, and totals. Perfect for Rio Tinto
            quarterly reviews.
          </div>
          <div
            style="
              margin-top: 15px;
              display: flex;
              gap: 10px;
              flex-wrap: wrap;
              justify-content: center;
            "
          >
            <span class="badge" style="background: #e8f5e9; color: #2e7d32"
              >📅 Date Range</span
            >
            <span class="badge" style="background: #e3f2fd; color: #1565c0"
              >👤 Customer Filter</span
            >
            <span class="badge" style="background: #fff3e0; color: #e65100"
              >🖨️ Printable</span
            >
          </div>
        </div>

        <!-- Weighbridge Delivery Docket - ACTIVE -->
        <div
          class="action-card success"
          onclick="alert('Use Sales Entry → Save to generate dockets automatically')"
          style="cursor: pointer"
        >
          <div style="position: absolute; top: 10px; right: 10px">
            <span class="badge badge-success">✅ ACTIVE</span>
          </div>
          <div class="action-card-icon">⚖️</div>
          <div class="action-card-title">Weighbridge Delivery Docket</div>
          <div class="action-card-description">
            Auto-generated PDF docket for each sale. Includes gross/tare/net
            weights, customer details, vehicle info, and pricing. Replaces
            manual iWEIGH dockets.
          </div>
          <div
            style="
              margin-top: 15px;
              display: flex;
              gap: 10px;
              flex-wrap: wrap;
              justify-content: center;
            "
          >
            <span class="badge" style="background: #e8f5e9; color: #2e7d32"
              >📧 Email Capable</span
            >
            <span class="badge" style="background: #fff3e0; color: #e65100"
              >🖨️ Auto-Generated</span
            >
          </div>
        </div>

        <!-- Daily Summary Report - COMING SOON -->
        <div class="action-card" style="opacity: 0.6; cursor: not-allowed">
          <div style="position: absolute; top: 10px; right: 10px">
            <span class="badge" style="background: #fff3e0; color: #e65100"
              >🚧 COMING SOON</span
            >
          </div>
          <div class="action-card-icon">📊</div>
          <div class="action-card-title">Daily Summary Report</div>
          <div class="action-card-description">
            Daily snapshot of operations: production totals, sales summary,
            stock movements, and alerts. Perfect for morning briefings and shift
            handovers.
          </div>
          <div
            style="
              margin-top: 15px;
              display: flex;
              gap: 10px;
              flex-wrap: wrap;
              justify-content: center;
            "
          >
            <span class="badge" style="background: #f3e5f5; color: #6a1b9a"
              >📅 Daily View</span
            >
            <span class="badge" style="background: #fff9c4; color: #f57f17"
              >📈 Trend Analysis</span
            >
            <span class="badge" style="background: #e3f2fd; color: #1565c0"
              >🔔 Alerts Included</span
            >
          </div>
        </div>

        <!-- Demand Overview Report - COMING SOON -->
        <div class="action-card" style="opacity: 0.6; cursor: not-allowed">
          <div style="position: absolute; top: 10px; right: 10px">
            <span class="badge" style="background: #fff3e0; color: #e65100"
              >🚧 COMING SOON</span
            >
          </div>
          <div class="action-card-icon">📋</div>
          <div class="action-card-title">Demand Overview Report</div>
          <div class="action-card-description">
            Track future orders and commitments. Shows PO details, requested
            delivery dates, customer requirements, and production planning.
            Essential for production scheduling.
          </div>
          <div
            style="
              margin-top: 15px;
              display: flex;
              gap: 10px;
              flex-wrap: wrap;
              justify-content: center;
            "
          >
            <span class="badge" style="background: #e3f2fd; color: #1565c0"
              >📅 Date Due</span
            >
            <span class="badge" style="background: #e8f5e9; color: #2e7d32"
              >📈 Capacity vs Demand</span
            >
            <span class="badge" style="background: #f3e5f5; color: #6a1b9a"
              >👤 By Customer</span
            >
          </div>
        </div>

        <!-- Stock Movement Report - COMING SOON -->
        <div class="action-card" style="opacity: 0.6; cursor: not-allowed">
          <div style="position: absolute; top: 10px; right: 10px">
            <span class="badge" style="background: #fff3e0; color: #e65100"
              >🚧 COMING SOON</span
            >
          </div>
          <div class="action-card-icon">📦</div>
          <div class="action-card-title">Stock Movement Report</div>
          <div class="action-card-description">
            Comprehensive audit trail of all inventory movements. Filter by
            product, location, movement type, and date range. Supports quarterly
            reconciliation and audits.
          </div>
          <div
            style="
              margin-top: 15px;
              display: flex;
              gap: 10px;
              flex-wrap: wrap;
              justify-content: center;
            "
          >
            <span class="badge" style="background: #fff9c4; color: #f57f17"
              >🔍 Advanced Filters</span
            >
            <span class="badge" style="background: #e3f2fd; color: #1565c0"
              >📊 Text Export</span
            >
            <span class="badge" style="background: #e8f5e9; color: #2e7d32"
              >📈 Audit Trail</span
            >
          </div>
        </div>
      </div>

      <!-- Help Section -->
      <div class="data-table" style="margin-top: 2rem">
        <div class="table-header">
          <h2 class="table-title">📚 Report Guidance</h2>
        </div>
        <div style="padding: 1.5rem">
          <h3
            style="
              color: var(--gray-700);
              font-size: 14px;
              font-weight: 600;
              margin-bottom: 0.75rem;
            "
          >
            ACTIVE REPORTS:
          </h3>
          <ul style="list-style: none; padding: 0; margin-bottom: 1.5rem">
            <li
              style="
                padding: 0.5rem 0;
                border-bottom: 1px solid var(--gray-100);
              "
            >
              <strong>Account Detail Report:</strong> Click the card above to
              access. Filter by customer (e.g., Rio Tinto) and date range. Use
              for quarterly reviews and invoicing.
            </li>
            <li
              style="
                padding: 0.5rem 0;
                border-bottom: 1px solid var(--gray-100);
              "
            >
              <strong>Weighbridge Delivery Docket:</strong> Automatically
              generated when you save a sale in Operations → Sales Entry. View
              via the Recent Movements table by clicking the docket number link.
            </li>
          </ul>

          <h3
            style="
              color: var(--gray-700);
              font-size: 14px;
              font-weight: 600;
              margin-bottom: 0.75rem;
            "
          >
            COMING SOON:
          </h3>
          <ul style="list-style: none; padding: 0">
            <li
              style="
                padding: 0.5rem 0;
                border-bottom: 1px solid var(--gray-100);
              "
            >
              <strong>Daily Summary Report:</strong> Daily operations snapshot
              for briefings
            </li>
            <li
              style="
                padding: 0.5rem 0;
                border-bottom: 1px solid var(--gray-100);
              "
            >
              <strong>Demand Overview:</strong> Track future orders and
              production planning
            </li>
            <li style="padding: 0.5rem 0">
              <strong>Stock Movement Report:</strong> Comprehensive movement
              audit trail
            </li>
          </ul>
        </div>
      </div>
    </div>

    <script>
      // Update header inventory value
      async function updateHeaderValue() {
        try {
          const response = await fetch("/api/stock/summary");
          const data = await response.json();
          const totalValue = data.total_inventory_value || 0;
          document.getElementById("headerTotalValue").textContent =
            new Intl.NumberFormat("en-AU", {
              style: "currency",
              currency: "AUD",
              minimumFractionDigits: 0,
            }).format(totalValue);
        } catch (error) {
          console.error("Error loading header value:", error);
        }
      }
      updateHeaderValue();
    </script>
  </body>
</html>
